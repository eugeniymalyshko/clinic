"use strict";

//---------- Device type-------------------

function isMobile() {
  const regex =
    /Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;
  return regex.test(navigator.userAgent);
}

if (isMobile()) {
  document.body.classList.add("_touch");
  //   const menusArrows = document.querySelectorAll(".menu__arrow");
  const menusHub = document.querySelectorAll(".menu__link_hub");

  if (menusHub.length > 0) {
    for (let index = 0; index < menusHub.length; index++) {
      const menuHub = menusHub[index];
      menuHub.addEventListener("click", function (e) {
        menuHub.parentElement.classList.toggle("_active");
      });
    }
  }
} else {
  document.body.classList.add("_pc");
}

// Menu burger
const menuIcon = document.querySelector(".menu__icon");
const body = document.querySelector("body");
const menuBody = document.querySelector(".menu__body");

menuIcon.addEventListener("click", () => {
  menuIcon.classList.toggle("_active");
  menuBody.classList.toggle("_active");
  body.classList.toggle("_lock");
});

// Accordion
document.addEventListener("click", (e) => {
  const btn = e.target.closest(".accordion__button");
  if (!btn) return;

  const acc = btn.closest(".accordion");
  const isSingle = acc.hasAttribute("data-single");

  const expanded = btn.getAttribute("aria-expanded") === "true";
  const newState = !expanded;
  btn.setAttribute("aria-expanded", String(newState));

  if (isSingle && newState) {
    // закрити всі інші
    acc
      .querySelectorAll('.accordion__button[aria-expanded="true"]')
      .forEach((b) => {
        if (b !== btn) b.setAttribute("aria-expanded", "false");
      });
  }
});
